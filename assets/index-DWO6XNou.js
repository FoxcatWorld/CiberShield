import{initializeApp as R}from"https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(n){if(n.ep)return;n.ep=!0;const e=o(n);fetch(n.href,e)}})();const w={apiKey:"YOUR_API_KEY",authDomain:"YOUR_AUTH_DOMAIN",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_STORAGE_BUCKET",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID",measurementId:"YOUR_MEASUREMENT_ID"};R(w);async function O(r){const t=doc(db,"CiberShieldWebAnalitycs","NumVistas");try{await updateDoc(t,{[r]:increment(1)}),console.log(`Counter for ${r} incremented successfully!`)}catch(o){console.error("Error incrementing view counter: ",o)}}let u=null;function S(){return[{dia:1,emoji:"üåû",activo:!0},{dia:2,emoji:"üî•",activo:!0},{dia:3,emoji:"üî•",activo:!0},{dia:4,emoji:"‚ùå",activo:!1},{dia:5,emoji:"üî•",activo:!0},{dia:6,emoji:"üíß",activo:!1},{dia:7,emoji:"üî•",activo:!0}]}function C(){const r=document.getElementById("menuContent");if(r)if(!u)r.innerHTML=`
      <h3>Registro / Login</h3>
      <input type="text" id="nombreUsuario" placeholder="Nombre de usuario" autocomplete="username" />
      <button id="loginBtn">Registrarse / Iniciar sesi√≥n</button>
    `,document.getElementById("loginBtn").addEventListener("click",window.registrarUsuario);else{const t=S(),o=t.filter(i=>i.emoji==="üî•").length;r.innerHTML=`
      <h3>Usuario: <b>@${u}</b></h3>
      <button id="logoutBtn">Cerrar sesi√≥n</button>
      <div class="calendar" title="Racha de la semana">
        ${t.map(i=>`<span title="D√≠a ${i.dia}">${i.emoji}</span>`).join("")}
      </div>
      <small style="display:block;margin-top:8px;color:var(--c-muted);">Racha: ${o} d√≠as</small>
    `,document.getElementById("logoutBtn").addEventListener("click",window.cerrarSesion)}}window.registrarUsuario=function(){const r=document.getElementById("nombreUsuario"),t=document.getElementById("userMenu"),o=document.getElementById("brandText"),i=document.getElementById("brandSub");if(r&&t&&o&&i){const n=r.value.trim();n?(u=n,o.textContent="Bienvenido,",i.textContent=`@${u}`,t.hidden=!0):r.placeholder="¬°Introduce un nombre!"}};window.cerrarSesion=function(){const r=document.getElementById("userMenu"),t=document.getElementById("brandText"),o=document.getElementById("brandSub");u=null,t&&o&&(t.textContent="CiberShield",o.textContent="Tu escudo digital."),r&&(r.hidden=!0)};document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("brandIcon"),t=document.getElementById("userMenu"),o=document.getElementById("fabMenuToggle"),i=document.getElementById("mobileNav"),n=document.getElementById("closeMenu"),e=document.getElementById("menuOverlay");if(r&&t&&(r.addEventListener("click",()=>{t.hidden?(C(),t.hidden=!1):t.hidden=!0}),document.addEventListener("mousedown",s=>{!t.contains(s.target)&&s.target!==r&&(t.hidden=!0)})),o&&i&&n&&e){let s=!1,l=!0,m,f,h=0,p=0;const y=5;o.addEventListener("mousedown",a=>{m=a.clientX,f=a.clientY,l=!0,a.target===o&&(s=!0)}),document.addEventListener("mouseup",a=>{s&&(s=!1),l&&a.target===o&&(i.classList.toggle("open"),i.hidden=!i.hidden,e.hidden=!e.hidden),l=!0}),document.addEventListener("mousemove",a=>{if(!s)return;a.preventDefault();const L=a.clientX-m,x=a.clientY-f;(Math.abs(L)>y||Math.abs(x)>y)&&(l=!1);const E=a.clientX-m+h,v=a.clientY-f+p,B=window.innerWidth-o.offsetWidth,M=window.innerHeight-o.offsetHeight;o.style.left=`${Math.min(B,Math.max(0,E))}px`,o.style.top=`${Math.min(M,Math.max(0,v))}px`,h=E,p=v,m=a.clientX,f=a.clientY}),n.addEventListener("click",a=>{a.stopPropagation(),i.classList.remove("open"),i.hidden=!0,e.hidden=!0}),e.addEventListener("click",()=>{i.classList.remove("open"),i.hidden=!0,e.hidden=!0}),o.ondragstart=function(){return!1}}});const g=document.getElementById("foxImg"),d=document.getElementById("bubbleDialog"),c=document.getElementById("chatBar"),I=c?c.querySelector('input[type="text"]'):null,T=c?c.querySelector('button[type="submit"]'):null,b=document.querySelector(".tagline");g&&d&&c&&I&&T&&b&&(g.addEventListener("mouseenter",()=>{d.textContent="La IA a√∫n no est√° disponible.",d.hidden=!1}),g.addEventListener("mouseleave",()=>{d.hidden=!0}),g.addEventListener("click",()=>{d.textContent="La IA a√∫n no est√° disponible. ¬°Pronto podr√°s chatear conmigo!",d.hidden=!1,c.hidden=!0}),c.addEventListener("submit",r=>{r.preventDefault(),d.textContent="La IA no est√° activa en este momento. ¬°Vuelve pronto!",d.hidden=!1,I.value=""}),b&&(b.textContent="La IA a√∫n no est√° disponible, ¬°pero lo estar√° pronto!"));document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".side.left .tile, .side.right .tile, .mobile-nav .tile").forEach(t=>{t.addEventListener("click",o=>{const i=t.querySelector(".txt");if(i){const n=i.textContent.trim();let e="";switch(n){case"Paisajes y regiones":e="PaisRegiones";break;case"Seguridad Online":e="SeguridadOnline";break;case"Juegos":e="Juegos";break;case"Articulos":e="Articulos";break;case"Recomendaciones":e="Recomendaciones";break;case"MinTic":e="MinTic";break;case"Downloads":e="Downloads";break;case"Referencias":e="Referencias";break;case"Examen":e="Examen";break;case"Racha":e="Racha";break;default:console.warn(`No se encontr√≥ un campo de Firestore para la opci√≥n: ${n}`);return}e&&O(e)}})})});
